
 Actualmente los sensores de vientos habituales cuentan con dos elementos básicos. Uno de ellos se encarga de medir la velocidad del viento y el otro su dirección, a distinguir el anemómetro y la veleta respectivamente. Estos dos elementos pueden encontrarse montados de forma separada o conjuntamente denominándose veleta potencio métrica.
 Hay que tener en cuenta que este sistema, aun siendo muy preciso, tiene un coste elevado y necesita de una instalación en una localización fija, además de necesitar una altura y distancia mínima de cualquier superficie para poder realizar las medidas correctamente.
 
 Diariamente utilizamos dispositivos electrónicos que cuentan con sensores que miden la inclinación, aceleración y dirección del dispositivo, podemos diferenciar desde un teléfono móvil a un coche o incluso un avión.
 Estos sensores son utilizados para diversas funciones como, el nivel de un objeto (un avión volando), la aceleración de un objeto (coche de fórmula 1), etc.
 
 ¿Por que no usar estos sensores para medir el viento?
 
 En esta sección trataré de como utilizar un sensor de aceleración, giroscopio y magnetómetro para medir el viento.
 Para realizar este experimento he utilizado el sensor MPU9250\cite{InvenSense2016} que cuenta con la integración del sensor MPU6050, aceleración y giroscopio, y el sensor AK8963, magnetómetro, componiendo de esta forma un microchip que mide en función de 3 ejes la alteración de su posición respecto de la tierra.
 
 Los datos obtenidos por el sensor MPU6050, son datos sin tratar que indican la aceleración en el instante de la medición y la inclinación respecto de la anterior medida tomada, mientras que el sensor AK8963 indica la orientación del sensor.
 
   \begin{figure}{FIG:FOTOWARNING}{PONER FOTO DE LOS SENSORES.}
	\image{4cm}{}{warningFoto}
\end{figure}
 
 Para poder saber claramente en que posición se encuentra el chip respecto de una superficie plana y no su inclinación respecto de la anterior medida, he utilizado el algoritmo de madgwick que utiliza cuaterniones para indicar la inclinación absoluta respecto de la tierra. 
 
 Los cuaterniones es un conjunto de cuatro componentes complejas que sirven para la teoría de números, rotaciones en el espacio y para diseño de gráficos, en mi caso lo usaré para las rotaciones en el espacio, los cuaterniones se pueden expresar de la siguiente forma \cite{Graves1999}.
 
\begin{figure}{FIG:CUATERNIONFORMULA}{Fórmula de cuaternion, podemos diferenciar w, x, y, z que son los valores reales que componen el cuaternion Q y el conjunto i, j, k que componen la parte imaginaria de las unidades. }
        \image{6cm}{}{cuaternionformula}
\end{figure}

   Mediante el algoritmo de madgwick, convertimos los datos obtenidos desde el giroscopio, acelerómetro y magnetómetro en un componente de 3 elementos, yaw, pitch y roll.
   Cada uno de estos elementos nos indica su rotación respecto de un eje del aeromodelo. 
 

\begin{figure}{FIG:YAWPITCHROLLPLANE}{Avión con los ejes de giro, yaw, pitch y roll, obtenidos mediante cuaterniones.}
	\image{4cm}{}{yawpitchrollplane}
\end{figure}
 
 Mediante la utilización de estas rotaciones respecto de sus ejes podemos determinar como hay que actuar en los motores para que se mantenga volando estable y horizontal.
  

\begin{figure}[Ejes MPU9250]{FIG:EJESMPU9250}{Sensor MPU9250 con ejes de funcionamiento. Figura \ref{SBFIG:EjesAccelGyro} muestra el sentido de los ejes del sensor MPU6050. Figura \ref{SBFIG:EjesMagneto} muestra el sentido de los ejes del sensor MPU6050.}
  \subfigure[SBFIG:EjesAccelGyro]{Sensor MPU9250 con ejes del sensor MPU6050}{\image{4cm}{}{mpu9250_acelgyro_axes}} \quad
  \subfigure[SBFIG:EjesMagneto]{Sensor MPU9250 con ejes del sensor AK8963}{\image{4cm}{}{mpu9250_magneto_axes}}
\end{figure} 

%https://es.m.wikipedia.org/wiki/Archivo:Flight_dynamics_with_text.png
 
 En este punto contamos con la inclinación del sensor respecto de la tierra, su aceleración, dirección en grados, con este conjunto de datos podemos calcular la variación de su posición respecto de un punto.
 

  
  Para calcular el viento he planteado un sistema en el que el sensor está situado en un "poste flexible" anclado al suelo, de esta forma si el sensor está orientado al norte y se inclina hacia delante obtenemos una dirección de viento de sur a norte, y en caso de inclinarte hacia delante y la izquiera, obtenemos un viento de sur-este. La fuerza del viento viene indicado directamente por los datos obtenidos del acelerómetro en función de los tres ejes.
  
  